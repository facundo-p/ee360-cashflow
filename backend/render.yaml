# render.yaml - Blueprint for Render deployment
# https://render.com/docs/blueprint-spec

services:
  - type: web
    name: ee360-cashflow-api
    runtime: docker
    dockerfilePath: ./Dockerfile
    dockerContext: .
    region: oregon  # or your preferred region
    plan: starter   # free tier with limitations, upgrade for always-on
    
    # Health check
    healthCheckPath: /health
    
    # Environment variables
    envVars:
      - key: NODE_ENV
        value: production
      - key: PORT
        value: 10000  # Render assigns this automatically
      - key: DB_PATH
        value: /data/app.sqlite
      - key: CORS_ORIGIN
        sync: false   # Set manually in dashboard
      - key: JWT_SECRET
        generateValue: true  # Render generates a random secret
    
    # Persistent disk for SQLite database
    disk:
      name: sqlite-data
      mountPath: /data
      sizeGB: 1  # 1GB should be plenty for SQLite
